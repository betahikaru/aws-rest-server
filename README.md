aws-rest-server
=========

aws-rest-server is simple api server for AWS, generated by Sinatra.
We are assuming that aws-rest-server is used by client like iOS app.

## Getting Started

### Requirements
* AWS Account
* Ruby

### Quick start

```shell
git clone git@github.com:betahikaru/aws-rest-server.git
cd aws-rest-server
bundle install --path vendor/bundle
bundle exec rackup
```

Server will response json. Content-Type is "application/json".

Server has sample data. Show folloing command.

```shell
% curl -u user:changeme "http://localhost:9292/aws/iam/users?test=1"
{
    "Users": [
        {
            "UserName": "aws_user1",
            "Path": "/",
            "CreateDate": "2014-05-23T14:46:39Z",
            "UserId": "USER1XXXXXXXXXXXXXXXX",
            "Arn": "arn:aws:iam::123456789012:user/aws_user1"
        },
        ...
    ]
}
```

> All page needs BasicAuth. username is "user", passoword is "changeme" by default. If you want to change those, show #Authentication topic.

## Setting

First, copy ```.env.sample``` to ```.env```.
```shell
cp .env.sample .env
vi .env
```

### IAM User
If you want to show Real data, set up access-key and secret and restart server.
Edit ```.env```.

```shell
AWS_ACCESS_KEY_ID=<Your access key>
AWS_SECRET_ACCESS_KEY=<Your secret access key>
AWS_REGION=ap-northeast-1
```

### Authentication
aws-rest-server uses BasicAuth for all request.
Edit ```.env``` to set username and password.

```
BASIC_AUTH_USERNAME=<User name for BasicAuth>
BASIC_AUTH_PASSWORD=<Password for BasicAuth>
```

And, don't support OAuth and other one yet.

## Usage

- List Supported AWS Services.
  - ```/aws```
- List Supported IAM Resources.
  - ```/aws/iam```
- List IAM Users.
  - ```/aws/iam/users```
  - ```/aws/iam/users?test=1```
- List IAM Groups.
  - ```/aws/iam/groups```
  - ```/aws/iam/groups?test=1```
- IAM entity usage and IAM quotas.
  - ```/aws/iam/account_summary```
  - ```/aws/iam/account_summary?test=1```

## Licence
MIT
